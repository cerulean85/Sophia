# EventBridge와 Lambda를 연계하여 만들 수 있는 기능

AWS EventBridge와 Lambda를 연계하면 다양한 **이벤트 기반** 기능을 손쉽게 구현할 수 있습니다. 이를 통해 특정 이벤트가 발생했을 때 자동으로 트리거되어 작업을 수행하는 시스템을 만들 수 있습니다. 아래는 EventBridge와 Lambda를 연계하여 구현할 수 있는 몇 가지 유용한 기능들입니다.

![alt text](../../Images/cloud/event_bridge_graph.png)

### 1. **S3 버킷 파일 업로드 시 이미지 처리**
   - **상황**: S3 버킷에 이미지가 업로드될 때, 이미지에 대해 자동으로 리사이징을 수행하는 시스템.
   - **구현**: 
     1. **S3 이벤트**를 EventBridge에서 감지하여, 파일 업로드 이벤트를 발생시킴.
     2. EventBridge에서 해당 이벤트를 받아 **Lambda** 함수를 호출.
     3. Lambda 함수가 S3에서 이미지를 가져와 리사이징 작업을 수행.
     4. 처리된 이미지를 다시 S3의 다른 버킷에 저장.

### 2. **EC2 인스턴스 상태 모니터링 및 자동화된 반응**
   - **상황**: EC2 인스턴스가 종료되거나 특정 상태로 변경되었을 때, 관리자에게 알림을 보내거나 인스턴스를 다시 시작하는 시스템.
   - **구현**:
     1. EventBridge에서 **EC2 인스턴스의 상태 변경 이벤트**를 감지.
     2. 상태가 `stopped` 또는 `terminated`로 변경되면, Lambda 함수를 호출.
     3. Lambda 함수가 **SNS**를 통해 관리자에게 경고 메시지를 전송하거나, 필요한 경우 **EC2 인스턴스 재시작** 작업을 자동으로 수행.

### 3. **자동 백업 시스템**
   - **상황**: 매일 특정 시간에 RDS 데이터베이스의 백업을 자동으로 생성하는 시스템.
   - **구현**:
     1. EventBridge에서 **스케줄러** 기능을 사용해 매일 자정에 이벤트를 트리거.
     2. 트리거된 이벤트가 Lambda 함수를 호출.
     3. Lambda 함수는 **RDS 스냅샷**을 생성하여 백업을 수행.

### 4. **클라우드 인프라 비용 최적화**
   - **상황**: 사용량이 적은 시간대에 EC2 인스턴스를 자동으로 종료하고, 업무 시간에 다시 시작하는 시스템.
   - **구현**:
     1. EventBridge에서 업무 외 시간(예: 저녁 8시)에 이벤트를 트리거.
     2. Lambda 함수가 트리거되면 **EC2 인스턴스 종료** 명령을 실행.
     3. 아침 9시에는 다시 Lambda를 호출하여 **EC2 인스턴스를 시작**.

### 5. **애플리케이션 이벤트 로깅 및 알림 시스템**
   - **상황**: 사용자 애플리케이션에서 중요한 이벤트(예: 결제 완료, 계정 생성)를 처리하고 관련 부서에 알림을 보내는 시스템.
   - **구현**:
     1. 애플리케이션에서 발생하는 **결제 완료** 또는 **계정 생성** 이벤트를 EventBridge에 전송.
     2. EventBridge가 해당 이벤트를 Lambda에 전달.
     3. Lambda가 데이터를 분석하고, 결과를 **SNS**로 전송하여 이메일이나 문자 메시지로 관련 부서에 알림을 전달.

### 6. **실시간 데이터 파이프라인**
   - **상황**: 실시간으로 이벤트 데이터를 수집하여 데이터 분석 파이프라인으로 전송하는 시스템.
   - **구현**:
     1. 다양한 소스(S3, DynamoDB, Kinesis 등)에서 발생하는 이벤트를 EventBridge로 수집.
     2. EventBridge에서 Lambda를 호출하여 데이터를 **Amazon Kinesis**, **S3** 또는 **Redshift**로 전송.
     3. 실시간 데이터를 처리 및 분석하는 데이터 파이프라인을 구성.

### 7. **외부 SaaS 서비스와의 연동**
   - **상황**: 외부 SaaS 서비스(Zendesk, Datadog 등)에서 특정 이벤트가 발생하면 AWS에서 자동으로 반응하는 시스템.
   - **구현**:
     1. SaaS 애플리케이션에서 발생하는 이벤트를 EventBridge에서 수신.
     2. EventBridge에서 Lambda를 호출하여, 그 이벤트에 기반한 자동화 작업을 수행 (예: Zendesk 티켓 생성 시 Slack에 알림 전송).

### 8. **자동 보안 시스템**
   - **상황**: AWS 계정에서 보안 관련 이벤트가 발생했을 때, 자동으로 조치를 취하거나 알림을 보내는 시스템.
   - **구현**:
     1. EventBridge에서 **AWS CloudTrail**에서 발생하는 보안 이벤트를 감지.
     2. Lambda 함수가 트리거되어 **IAM 정책 수정**이나 **S3 버킷 접근 권한 수정** 같은 보안 조치를 자동으로 수행.
     3. 문제가 발생한 경우 관리자에게 SNS를 통해 알림 전송.

### 9. **서드파티 API 호출 자동화**
   - **상황**: AWS 서비스에서 이벤트가 발생했을 때, 서드파티 API에 자동으로 데이터를 보내는 시스템.
   - **구현**:
     1. EventBridge가 이벤트를 감지하여 Lambda 함수를 호출.
     2. Lambda 함수가 서드파티 API에 요청을 전송하고, 결과를 처리.
     3. 서드파티 API의 응답 데이터를 다른 AWS 서비스(S3, RDS 등)에 저장.

이러한 예시들은 AWS **EventBridge**와 **Lambda**의 결합으로, 다양한 애플리케이션 및 자동화된 프로세스를 손쉽게 구축할 수 있다는 점을 보여줍니다. EventBridge는 **이벤트 라우팅**, Lambda는 **이벤트 처리**의 역할을 맡아, 유연한 이벤트 기반 아키텍처를 구성할 수 있습니다.