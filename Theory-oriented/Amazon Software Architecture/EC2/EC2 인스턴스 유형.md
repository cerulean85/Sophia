# EC2 Instance 유형

## 온디맨드 인스턴스(On-demand Instance)
- 사용한 만큼 요금을 부과하는 EC2 인스턴스
- 별다른 설정없이 인스턴스 생성하면 해당 요금제 사용
- 가장 기본적이지만 가장 비싼 과금 유형

## 예약 인스턴스(Reserved Instance)
- EC2 인스턴스를 장기간 이용할 때 유리한 옵션
- 인스턴스 미리 구매하여 사용하는 과금 유형
  - 1~3년 사이의 임의 기간이 아닌 1년 또는 3년 단위로 구매 가능
- 온디맨드에 비해 최대 요금을 72% 절감할 수 있으며, Standard와 Convertible 두 가지 종류가 있음

## 표준 예약 인스턴스(Standard RI)
- t2.micro의 t2 인스턴스와 같이 동일한 인스턴스 유형 간 수정이 가능
  - 예를 들어, t2.microdptj t2는 인스턴스 유형이고, micro는 인스턴스 크기를 의미
  - nano, micro, small 등의 접미사는 각각 고유한 정규화 인자(Normalization factor)를 가짐
  - 예를 들어, nano 인스턴스는 0.25, small 인스턴스는 1의 정규화 인자 값을 가짐
  - 인스턴스 크기를 수정할 때 현재 보유한 표준 RI 인스턴스의 정규화 인자 합이 수정하고자 하는 인스턴스 유형의 정규화 인자 합과 동일해야 함. 즉, 기존 t2.large 인스턴스를 하나 갖고 있다면 이를 t2.small 인스턴스 넷이나 t2.medium 인스턴스 둘로 나눌 수 있음. 또는 반대로 t2.small 인스턴스 넷과 t2.medium 인스턴스 둘의 계약을 합쳐 t2.large RI로 병합할 수 있음
- 약정 기간 중 해당 인스턴스가 필요 없어지면 EC2 인스턴스 마켓플레이스에 판매 가능

## 전환 가능 예약 인스턴스(Convertible RI)
- 계약기간 중 인스턴스 스펙 뿐 아니라 OS나 인스턴스 유형 등 더 다양한 옵션을 변경해야 할 수 있음
- Convertible RI는 표준 RI에 비해 할인율이 다소 낮으나, 중간에 인스턴스의 유형과 OS 교체도 가능
- 기존 인스턴스 옵션을 수정하는 것이 아닌 기존 RI를 AWS에서 제공하는 새로운 인스턴스와 교환(c3.nano → c4.nano) 
- 기존의 스펙과 같거나 그 이상의 인스턴스로 교체해야 하며, 해당 차익을 지불해야 한다는 제약 존재
- 도중에 쓸모 없어진 인스턴스는 마켓플레이스에서 판매 불가능

## 스팟 인스턴스(Spot Instance)
- 온디맨드에 비해 70~90% 정도의 가격으로 EC2 인스턴스를 이용할 수 있으며, 가격은 수요와 공급에 따라 변화. 남는 용량을 효율적으로 활용하기 위해 제공
- 사용할 인스턴스에 입찰하는 형식으로, 제안한 가격이 AWS에서 명시한 인스턴스 시세보다 높다면 인스턴스를 수십% 저렴하게 사용할 수 있으나, 시세가 변해 제안한 가격보다 인스턴스가 비싸진다면 해당 인스턴스는 자동으로 중단됨
  - 인스턴스 시세가 입찰가 이상으로 올라가면 2분의 유예기간을 주고 인스턴스 제공을 중단
  - 중단된 인스턴스는 기본적으로 종료되나 설정을 통해 인스턴스를 종료하는 대신 중지 또는 최대 절전 모드에 들어가게 할 수 있음
- 전체 EC2 인스턴스가 부족한 경우 사용중인 스팟 인스턴스를 종료시키므로 안정성이 떨어짐
  - 불시에 중단될 수 있으므로 유연하게 동작해야 하는 작업에 사용됨
  - DB나 서버 호스팅 대신 특정 연산을 수행하는 목적에 적합
  - 백업 생성이나 중단 시 알람 푸시 등의 Failure Management가 잘 갖춰져야 함

