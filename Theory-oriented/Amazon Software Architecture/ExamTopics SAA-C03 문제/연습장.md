# 1029

# [652] Amazon EMR Cluster에서 노드 종류 
Amazon EMR 클러스터에서는 분산 데이터 처리 작업을 위해 세 가지 주요 노드 유형을 제공합니다. 각 노드는 클러스터 내에서 고유한 역할을 하며, 데이터를 처리하고 저장하는 방식에서 차이가 있습니다.

### 1. **Primary Node (프라이머리 노드)**
   - **역할**: 클러스터의 **마스터 노드**로, 작업을 조정하고 리소스를 관리합니다. 다른 노드의 상태를 모니터링하며, 작업을 분배하고 클러스터 내 모든 데이터 흐름을 조정합니다.
   - **특징**: 클러스터의 제어와 조정 기능을 담당하기 때문에 항상 하나만 존재합니다. Primary 노드가 중단되면 클러스터 전체가 중단될 수 있습니다.
   - **예시**: Spark, Hadoop, Hive 등의 작업을 조정하고 클러스터의 상태를 모니터링하여 작업이 원활하게 이루어지도록 합니다.

### 2. **Core Node (코어 노드)**
   - **역할**: 데이터를 **영구적으로 저장**하고, 실제 데이터 처리 작업을 수행하는 노드입니다.
   - **특징**: 분산 파일 시스템(HDFS)에서 데이터를 저장하고 유지 관리하며, 클러스터의 작업을 분산하여 처리합니다. Core 노드가 중단되면 데이터 손실의 위험이 있으므로 항상 유지됩니다.
   - **예시**: 데이터 분산 저장 및 분석을 위한 노드로, 분석 중간 결과를 저장하거나 결과 데이터를 영구적으로 저장하는 역할을 합니다.

### 3. **Task Node (태스크 노드)**
   - **역할**: **일시적인 데이터 처리 작업**만을 수행하는 노드입니다. 데이터를 저장하지 않고, 단순히 처리 작업만을 위해 추가되는 노드로 **스팟 인스턴스**로 주로 사용됩니다.
   - **특징**: 필요에 따라 수평 확장이 가능하며, 작업 완료 후 언제든지 종료될 수 있습니다. 작업을 확장하여 클러스터의 성능을 높이는 데 기여합니다.
   - **예시**: 일회성 작업이나 특정 분석 작업이 필요할 때 추가로 사용되며, 비용 절감을 위해 필요할 때만 추가하고 작업이 끝나면 종료시킬 수 있습니다.

### 요약
- **Primary Node**: 클러스터 관리 및 작업 조정 (마스터 역할).
- **Core Node**: 영구 데이터 저장 및 처리 (데이터 보존 필요).
- **Task Node**: 일시적 데이터 처리 (저장 없이 처리만).

이러한 노드 구성을 통해 Amazon EMR은 확장성, 성능 최적화, 비용 효율성을 지원하는 유연한 클러스터 구성을 제공합니다.


# [655] ALB 세션 고정 기능
**Application Load Balancer(ALB)**는 **세션 고정 기능(Session Stickiness, 또는 Sticky Sessions)**을 지원합니다. 이를 통해 특정 사용자가 ALB를 통해 연결되면, 이후의 요청들이 동일한 백엔드 인스턴스로 전달되도록 설정할 수 있습니다.

### ALB 세션 고정 방식

ALB에서 세션 고정을 활성화하면, 로드 밸런서는 특정 사용자 요청을 동일한 백엔드 인스턴스로 계속 전달하기 위해 **쿠키 기반**으로 세션을 관리합니다. ALB는 두 가지 세션 고정 쿠키 옵션을 제공합니다.

1. **로드 밸런서 생성 쿠키 (AWSALB 쿠키)**:
   - ALB가 자체적으로 생성한 쿠키를 사용해 세션을 고정합니다.
   - 쿠키의 만료 시간을 설정할 수 있으며, 쿠키가 만료되면 새로운 백엔드 인스턴스로 연결될 수 있습니다.

2. **애플리케이션 생성 쿠키**:
   - 애플리케이션이 생성한 쿠키를 사용해 세션을 고정하는 방식입니다.
   - 애플리케이션 측에서 쿠키를 생성하고 관리해야 하며, 이를 통해 세션 고정이 이루어집니다.
   - 이 방식은 애플리케이션이 세션 유지 관리에 대해 더 많은 제어 권한을 가지게 해줍니다.

### 세션 고정 기능의 사용 예시

세션 고정 기능은 **상태 정보를 유지해야 하는 웹 애플리케이션**에 유용합니다. 예를 들어, 사용자가 로그인한 상태나 장바구니와 같은 세션 데이터를 특정 서버에 저장하는 애플리케이션에서는 세션 고정을 통해 일관된 사용자 경험을 보장할 수 있습니다.

세션 고정은 AWS 콘솔이나 CLI, SDK를 통해 ALB 설정 시 활성화할 수 있으며, 만료 시간 등 세부 설정도 조정이 가능합니다.