# Change Data Capture (CDC)

- Change Data Capture (CDC)는 데이터베이스에서 발생하는 변경 사항(삽입, 업데이트, 삭제)을 캡처하고 이를 다른 시스템으로 실시간으로 전송하는 기술
- AWS Database Migration Service (DMS)에서 CDC를 사용하여 소스 데이터베이스와 대상 데이터베이스 간의 지속적인 데이터 동기화를 유지할 수 있음

## 주요 기능 및 특징
- **실시간 데이터 복제**: 데이터베이스에서 발생하는 변경 사항을 실시간으로 캡처하고 전송
- **데이터 동기화 유지**: 소스 데이터베이스와 대상 데이터베이스 간의 데이터 동기화를 유지
- **다양한 데이터베이스 지원**: PostgreSQL, MySQL, Oracle, SQL Server 등 다양한 데이터베이스 엔진을 지원
- **간편한 설정**: AWS DMS를 통해 쉽게 설정 가능

## 구성
- **소스 데이터베이스**: 변경 사항을 캡처할 데이터베이스
- **대상 데이터베이스**: 변경 사항을 적용할 데이터베이스
- **복제 인스턴스**: 데이터 복제를 수행하는 AWS DMS 인스턴스
- **복제 작업**: 데이터 복제 작업을 정의하는 설정

## 작동 방식
1. **소스 및 대상 엔드포인트 설정**: 소스 데이터베이스와 대상 데이터베이스의 엔드포인트를 설정
2. **복제 인스턴스 생성**: 데이터 복제를 수행할 AWS DMS 인스턴스를 생성
3. **복제 작업 생성**: 복제 작업을 생성할 때 "Migration Type"을 "cdc"로 설정하여 CDC를 활성화
4. **복제 작업 실행**: 복제 작업을 실행하여 소스 데이터베이스의 변경 사항을 실시간으로 대상 데이터베이스에 복제

## 다른 서비스와의 연관성
- **AWS Database Migration Service (DMS)**: 데이터베이스 마이그레이션 및 복제를 위한 서비스
- **Amazon Aurora**: 대상 데이터베이스로 사용될 수 있는 관리형 데이터베이스 서비스
- **AWS Schema Conversion Tool (SCT)**: 데이터베이스 스키마 변환을 지원

## 사용 사례
- **데이터베이스 마이그레이션**: 온프레미스 데이터베이스를 AWS로 마이그레이션하면서 실시간 데이터 동기화 유지
- **데이터 동기화**: 여러 데이터베이스 간의 실시간 데이터 동기화 유지
- **재해 복구**: 주요 데이터베이스의 실시간 복제를 통해 재해 복구 환경 구축

## 결론
- Change Data Capture (CDC)는 데이터베이스에서 발생하는 변경 사항을 실시간으로 캡처하고 전송하여 데이터 동기화를 유지하는 중요한 기술
- AWS DMS를 사용하여 쉽게 설정하고, 데이터베이스 마이그레이션 및 동기화에 활용할 수 있음

## 예제 코드
### AWS DMS 복제 작업 생성 예제
```json
{
  "ReplicationTaskIdentifier": "my-replication-task",
  "SourceEndpointArn": "arn:aws:dms:us-west-2:123456789012:endpoint:source-endpoint",
  "TargetEndpointArn": "arn:aws:dms:us-west-2:123456789012:endpoint:target-endpoint",
  "MigrationType": "cdc",
  "TableMappings": "file://mapping-file.json",
  "ReplicationTaskSettings": "file://task-settings.json"
}
```

# Ongoing Replication vs. Change Data Capture (CDC)

## Ongoing Replication
- **정의**: Ongoing Replication은 데이터베이스 마이그레이션 중 소스 데이터베이스와 대상 데이터베이스 간의 지속적인 데이터 복제를 설정하는 작업
- **목적**: 데이터베이스 마이그레이션 중에도 소스와 대상 데이터베이스 간의 데이터 동기화를 유지
- **작동 방식**: 초기 데이터 로드 후, 소스 데이터베이스에서 발생하는 모든 변경 사항을 실시간으로 대상 데이터베이스에 복제
- **사용 사례**: 데이터베이스 마이그레이션, 재해 복구, 데이터 동기화

## Change Data Capture (CDC)
- **정의**: Change Data Capture (CDC)는 데이터베이스에서 발생하는 변경 사항(삽입, 업데이트, 삭제)을 캡처하고 이를 다른 시스템으로 실시간으로 전송하는 기술
- **목적**: 데이터베이스의 변경 사항을 실시간으로 캡처하고 전송하여 데이터 동기화를 유지
- **작동 방식**: 데이터베이스의 트랜잭션 로그를 모니터링하여 변경 사항을 캡처하고, 이를 다른 시스템으로 전송
- **사용 사례**: 데이터 동기화, 실시간 분석, 데이터 웨어하우징

## 차이점 요약
- **초점**:
  - **Ongoing Replication**: 데이터베이스 마이그레이션 중 지속적인 데이터 동기화 유지
  - **CDC**: 데이터베이스의 변경 사항을 실시간으로 캡처하고 전송
- **작동 방식**:
  - **Ongoing Replication**: 초기 데이터 로드 후 변경 사항을 실시간으로 복제
  - **CDC**: 트랜잭션 로그를 모니터링하여 변경 사항을 캡처하고 전송
- **사용 사례**:
  - **Ongoing Replication**: 데이터베이스 마이그레이션, 재해 복구
  - **CDC**: 실시간 데이터 동기화, 실시간 분석, 데이터 웨어하우징

## 결론
- **Ongoing Replication**은 데이터베이스 마이그레이션 중 지속적인 데이터 동기화를 유지하는 데 중점을 두며, 초기 데이터 로드 후 변경 사항을 실시간으로 복제합니다.
- **CDC**는 데이터베이스의 변경 사항을 실시간으로 캡처하고 전송하여 데이터 동기화를 유지하는 데 중점을 둡니다.

두 개념은 유사하지만, Ongoing Replication은 주로 데이터베이스 마이그레이션 중에 사용되며, CDC는 실시간 데이터 동기화와 분석에 더 중점을 둡니다.