## I. L4 Switch 개요

### 가. L4 Switch 정의
- OSI 7 Layer 중 4번째 레이어인 Transport 레잉에 해당되는 TCP/UDP Port 정보를 이용하여 네트워크 트래픽을 분류하고 해당 트래픽의 경로를 결정하는 스위칭 기술

### 나. L4 Switch 특징
특징 | 내용 | 특징
-- | -- | --
부하분산 | - 서버 기반의 Load Balancing 제공<br>- Firewall & VPN Load Balancing 제공 | - 여러 대의 서버 분산/가상화
캐싱 서비스 | - 캐시 리다이렉션을 이용한 투명한 캐싱 서비스 제공 | - 사용자 설정 필요 없음<br>
서비스 연결| - N/W 트래픽 종류에 따라 서로 다른 서비스 | - 서비스 포트에 따라 서비스 종류 인식
QoS | - Application의 중요도에 따른 QoS보장 | - 서비스 포트 이용

- 캐시 리다이렉션은 내부망에서 외부로 향하는 웹 트래픽만을 가로채어 캐싱 서버로 전달하므로 불필요한 패킷 처리를 하지 않도록 하여 캐싱 서버의 응답 속도를 향상시키는 기법 


웹 트래픽 (80 포트) 만을 처리하기 때문에 캐싱 서버에서 불필요한 패킷 처리를 막아주어 응답속도를 빠르게 할 수 있음.


## I. 네트워크 장비와 보안 장비의 결합 L7 Switch 개요


### 가. L7 스위치(Switch) 개념 
- Layer 7인 Application 정보를 바탕으로 지능적인 트래픽 관리가 가능한 N/W 스위치 장비
 
- 기존 L4 스위치 기능들을 모두 수행 가능
- 최근 사회적인 문제가 되고 있는 네트워크 보안문제(URL 정보, 쿠키, 페이로드) 종합적으로 검사 서비스 제공
- 패킷의 내용을 분석하고 이를 바탕으로 지능적 동작을 수행하기 때문에 ‘L4스위치+보안’을 넘어서 여러 가지 역할을 수행
- L7 Switch는 L2∼7 사이의 모든 정보를 바탕으로 패킷을 전송/제어
(기존의 L2/3/4 스위치의 특징들이 모두 포함)

### 나. L7 스위치의 특징
특징 | 설명
-- | --
L4 기능 확장 | - L4 스위치의 연장선상에서 출발. L4 스위치가 처리할 수 없는 일들을 수행
보안 서비스 | - URL, 정보, 쿠키, 페이로드 등에 대한 종합 검사 서비스
지능적 동작 | - 패킷 내용 분서갛여 지능적 동작 수행. 여러 역할 수행
정보 범위 확대 | - L2 ~ L7 사이의 모든 정보 바탕으로 패킷 전송/제어

## II. L7 Switch 동작 과정 및 주요 기능

### 가. L7 Switch 동작 과정
![Alt text](./images/DN004_2.png)

### 나. L7 Switch 주요 기능
기능 | 설명
-- | --
보안기능강화<br>(Packet Filtering) | - 특정 패턴을 갖는 WORM, e-Mail, Virus 분석하여 차단<br>- DoS, DDoS와 같은 비정상 트래픽은 트래픽 유입 수준을 일정 정도로 제한
Content Switching | - 확장자(ASP, JSP, 이미지등)를 통한 서버의 동적 결정 및 스위칭(Redirection) 기능 수행
Load Balancing | - L4 스위치 기능 상속<br>- 서버장비(웹서버, 파일서버, 캐쉬서버) 등 부하 분산

## III. L7와 L4 비교

구분 | L7 스위치 | L4 스위치
-- | -- | --
개념| - 트래픽 내용 패턴 분석하여 패킷 처리 | - TCP/UDP 포트 정보 분석하여 서비스 종류별 패킷 처리
차이점 | - IP + Port + <u>트래픽</u><br> - 데이터 트래픽 분석/대응<br>- Application 계층 로드밸런싱 | - IP + Port<br> - Transport 계층 로드밸런싱
공통점 | - 스위치로 들어온 패킷을 적절한 목적지로 전송<br> - 로드밸런싱


## IV. L7 Switch 구축 시 선행 사항
구분 | 설명
-- | --
성능저하 문제 | - 필터, 패턴 수에 따른 성능 저하. 사전 검토 필요
모니터링 강화 | - ESM 등과 연계 방안 마련


### (참고) L3 Switch
- 패킷의 경로 제어를 위한 Source IP, Destination IO의 설정은 L3 스위치에 수행

- L3는 동일 프로토콜을 사용하는 분리된 N/W를 연결하는 라우터가 담당하며, IP 주소에 의한 최적 전송경로를 설정하여 효율적인 경로 설정을 위한 라우팅 테이블을 관리함
