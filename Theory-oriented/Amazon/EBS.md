# EBS (Elastic Block Store)
- EBS는 SSD나 HDD처럼 데이터를 저정하는 역할을 담당
- 하나의 AZ 서버 자원을 모아 생성하므로, 99.9999% 가용성 제공
- EC2와 같은 AZ에 존재 해야 하며, 다르다면 오류 발생
- 동일한 AZ에 생성된 EC2 장치에 탈부착 가능하고, 데이터를 잃지 않고 보관 가능
- 빠르게 사용량을 확장할 수 있으며, 프로비저닝한 부분에 대해 저렴한 비용으로 사용 가능
- 네트워크를 통해 연결되므로 EC2 인스턴스가 종료되어도 별개로 작동
- 인스턴스를 정지해도 독립적으로 살아있으므로, 스토리지 기능만 이용시 인스턴스에 대한 추가 요금을 내지 않아도 됨
- EC2 인스턴스에 여러 가지 EBS 부착이 가능하며, 반대도 가능

## EBS 볼륨 유형

|타입|범용|Provisioned IOPS|쓰루풋 최적화 HDD| Cold HDD| 마그네틱|
|:---:|:---:|:---:|:---:|:---:|:---:|
|이름|GP3|IO2|ST1|SC1|Standard|
|용량|1GB~16TB|4GB~16TB|500GB~16TB|500GB~16TB|1GB~1TB|
|사용|일반 범용|IOPS가 중요한 App/DB|쓰루풋이 중요한 App/Hadoop/OLAP DB 등|파일 저장소|백업/비주기적 데이터 액세스|
|MAX IOPS|16,000|64,000|500|250|40~200|

- 하드 성능은 용량과 MAX IOPS 수치를 보면 됨
- IOPS 수치가 높을수록 데이터 통신이 빠르며, 따라서 프로비전된 IOPS(64,000)이 가장 빠르고 좋음
- 일반적으로 범용타입은 GP3를 선택하지만, 요금을 극도로 아끼고 싶다면 마그네틱 사용
- **Provisioned**: 서버의 CPU, Memory 등의 자원을 할당 또는 적절히 배치하여 운영이 가능하도록 준비
- **쓰루풋(Throughpu)**: 시간당 처리된 작업수로, 초당 처리된 요청수(Transactions Per Second, TPS), 초당 전송된 데이터량(Mbps, Gbps) 등이 있음


## EBS 스냅샷
- EBS 스냅샷은 AWS에서 제공하는 블록 스토리지 서비스인 EBS 볼륨의 백업
- EBS 볼륨은 EC2 인스턴스에 추가로 연결할 수 있는 영구 스토리지로, EC2 인스턴스의 데이터를 저장하고 유지하는 데 사용
- EBS 스냅샷과 AMI는 EBS 볼륨 데이터의 백업, 복원, 복제를 수행하는 데 중요한 역할을 함

### 1. EBS 볼륨 데이터 백업
- EBS 스냅샷은 EBS 볼륨의 데이터를 안전하게 백업하고, 원본 데이터가 손상되거나 삭제된 경우 복원할 수 있음

### 2. 가용 영역 및 리전 간 스냅샷 복사
- 백업된 스냅샷은 다른 가용 영역 또는 리전으로 복사할 수 있어, 지역 간 재해 복구 전략이니 데이터 이전 용이

### 3. 커스텀 AMI 이미지 생성
- 스냅샷을 사용하여 EC2 인스턴스에 사용할 커스텀 AMI 이미지를 생성할 수 있음

### 4. 스냅샷을 사용한 새 EC2 인스턴스 생성
- 백업된 스냅샷을 이용하여 새로운 EC2 인스턴스 생성 가능

### 5. EBS 스냅샷 아카이브
- 자주 액세스 하지 않는 스냅샷을 저렴한 아카이브 스토리지 계층에 보관 가능
- 이를 통해 90일 이상 저장할 계획이고 액세스할 필요가 거의 없는 스냅샷에 대해 최대 75% 비용 절약 가능
  - 최소 과금 기간은 90일

### 6. EBS 스냅샷 휴지통
- 실수로 삭제한 스냅샷을 휴지통에 보관하여 복구할 수 있음
- 삭제된 파일을 1일부터 365일까지 보관 설정이 가능

### 7. EBS 빠른 스냅샷 복원(EBS Fast Snapshot Restore, FSR)
- 지연 시간을 최소화하여 빠르게 스냅샷으로부터 EBS 볼륨 복원하는 기능
- FSR을 사용하면, AZ별로 미리 스냅샷 데이터를 준비해놓아 복원 속도가 훨씬 빨라짐


## EBS Volume 장착 (실습하기)

### 1. EBS Volume 만들기
### 2. EBS Volume EC2 추가 
### 3. EBS Volume 연결 확인
### 4. EBS Volume 파일시스템 포맷
### 5. EBS Volume 마인트 설정

## EC2 Volume 확장

# 참고사이트
- [인파 EBS 링크](https://inpa.tistory.com/entry/AWS-%F0%9F%93%9A-EBS-%EA%B0%9C%EB%85%90-%EC%82%AC%EC%9A%A9%EB%B2%95-%F0%9F%92%AF-%EC%A0%95%EB%A6%AC-EBS-Volume-%EC%B6%94%EA%B0%80%ED%95%98%EA%B8%B0)

- [EC2 인스턴스 최대 절전 모드](https://www.megazone.com/techblog_181214_ec2-instances/)

- [EBS Snapshots](https://velog.io/@bettehub/EBS-Snapshots)