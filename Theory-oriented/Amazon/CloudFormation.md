# AWS CloudFormation

## 요약
- AWS CloudFormation은 AWS 리소스를 코드로 정의하고 관리할 수 있는 서비스

## 개요
- 인프라를 코드로 정의하여 AWS 리소스를 자동으로 프로비저닝하고 관리
- 템플릿을 사용하여 AWS 리소스를 선언적으로 정의

## 주요 기능 및 특징
- **인프라 자동화**: 코드로 정의된 템플릿을 사용하여 인프라 자동화
- **버전 관리**: 템플릿을 버전 관리하여 인프라 변경 사항 추적
- **반복 가능성**: 동일한 템플릿을 사용하여 여러 환경에 동일한 인프라 배포
- **의존성 관리**: 리소스 간의 의존성을 자동으로 관리
- **드리프트 감지**: 실제 인프라와 템플릿 간의 차이를 감지

## 구성
- **템플릿**: AWS 리소스를 정의하는 JSON 또는 YAML 파일
- **스택**: 템플릿을 기반으로 생성된 AWS 리소스의 집합
- **변경 세트**: 스택에 적용될 변경 사항을 미리 보여주는 기능
- **드리프트 감지**: 실제 리소스와 템플릿 간의 차이를 감지하는 기능

## 작동 방식
1. **템플릿 작성**
   - JSON 또는 YAML 형식으로 AWS 리소스를 정의
2. **스택 생성**
   - 템플릿을 사용하여 스택 생성
3. **변경 세트 생성**
   - 스택에 적용될 변경 사항을 미리 확인
4. **스택 업데이트**
   - 변경 세트를 사용하여 스택 업데이트
5. **드리프트 감지**
   - 실제 리소스와 템플릿 간의 차이를 감지
6. **예제 코드**:
    ```yaml
    AWSTemplateFormatVersion: '2010-09-09'
    Resources:
      MyBucket:
        Type: 'AWS::S3::Bucket'
        Properties:
          BucketName: 'my-bucket'
    ```

## 다른 서비스와의 연관성
- **AWS CodePipeline**: CI/CD 파이프라인에서 CloudFormation을 사용하여 인프라 배포 자동화
- **AWS Config**: 리소스 구성 변경 사항을 추적하고 CloudFormation과 통합하여 드리프트 감지
- **AWS IAM**: CloudFormation 템플릿에서 IAM 역할과 정책을 정의하여 리소스 접근 제어

## 사용 사례
- **자동화된 인프라 배포**: 코드로 정의된 템플릿을 사용하여 인프라를 자동으로 배포
- **다중 환경 관리**: 동일한 템플릿을 사용하여 개발, 테스트, 프로덕션 환경에 동일한 인프라 배포
- **재해 복구**: 템플릿을 사용하여 재해 복구 시 신속하게 인프라 복구

## 결론
- AWS CloudFormation은 인프라를 코드로 정의하고 관리할 수 있는 강력한 도구
- 템플릿을 사용하여 인프라를 자동화하고, 버전 관리 및 반복 가능성을 제공
- 다른 AWS 서비스와 통합하여 운영 효율성을 극대화할 수 있음