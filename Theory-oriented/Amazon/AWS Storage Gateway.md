# AWS Storage Gateway

- 온프레미스 데이터와 AWS 클라우드 스토리지를 연결하는 하이브리드 클라우드 스토리지 서비스

- 로컬 애플리케이션이 클라우드 기반 스토리지를 기존 방식대로 사용하도록 지원

- 백업, 복구, 아카이빙, 하이브리드 클라우드 워크로드 등음 손쉽게 처리할 수 있게 해줌

- AWS의 여러 스토리지 서비스(S3, Glacier, EBS)와 연동되며, 온프레미스 데이터센터와 AWS 사이에서 데이터의 원활한 흐름 제공

주요 게이트웨이 유형
AWS Storage Gateway는 3가지 주요 게이트웨이 유형으로 나뉩니다. 각 유형은 데이터 저장 방식과 사용 사례에 따라 구분됩니다.

파일 게이트웨이 (File Gateway):

설명: 파일 기반 워크로드를 위해 설계된 게이트웨이로, 로컬 파일을 S3 객체 스토리지에 저장할 수 있게 합니다.
기능:
NFS(Network File System) 및 SMB(Server Message Block)를 통해 파일을 S3로 저장.
자주 사용하는 데이터를 로컬에서 캐시하여, 빠른 읽기/쓰기 성능을 제공.
백업, 아카이빙, 대규모 파일 전송에 적합.
사용 사례:
온프레미스 파일을 클라우드로 백업 및 아카이브.
하이브리드 클라우드 파일 스토리지.
볼륨 게이트웨이 (Volume Gateway):

설명: 블록 스토리지를 위한 게이트웨이로, 온프레미스 애플리케이션에서 로컬 블록 스토리지처럼 사용할 수 있으며, 이를 AWS 클라우드로 백업할 수 있습니다.
운영 모드:
캐시 볼륨 모드:
자주 사용하는 데이터를 로컬에 캐싱하고 나머지는 AWS 클라우드에 저장.
온프레미스에 대규모 스토리지가 필요하지 않은 환경에 적합.
스토어드 볼륨 모드:
모든 데이터를 온프레미스에 저장하고 주기적으로 AWS로 백업.
기능:
블록 기반 데이터의 스냅샷을 Amazon S3에 백업하고, Amazon EBS로 복원 가능.
사용 사례:
온프레미스 데이터의 복제 및 클라우드 백업.
재해 복구 솔루션.
테이프 게이트웨이 (Tape Gateway):

설명: 기존 백업 및 아카이빙 솔루션에서 사용하는 가상 테이프 라이브러리(VTL)를 AWS 클라우드와 연동해 테이프 기반 백업을 S3 및 Glacier로 전환할 수 있습니다.
기능:
온프레미스에서 사용 중인 백업 소프트웨어와 호환.
테이프 데이터를 S3 및 Glacier에 안전하게 저장.
사용 사례:
장기 보관이 필요한 데이터를 클라우드로 아카이빙.
기존 테이프 기반 백업에서 클라우드로의 전환.
주요 기능
하이브리드 클라우드 스토리지: 온프레미스에서 클라우드로 데이터를 쉽고 효율적으로 전송, 백업, 복원할 수 있습니다.
저비용 데이터 아카이빙: 자주 액세스하지 않는 데이터를 Amazon S3 Glacier 같은 저비용 스토리지로 아카이빙할 수 있습니다.
데이터 암호화: 데이터를 전송 중이거나 저장 중일 때 모두 암호화하여 안전성을 보장합니다.
고가용성: 게이트웨이는 클라우드 스토리지의 확장성 및 가용성을 활용하여 지속적인 데이터 접근성을 보장합니다.
자동화된 백업: 게이트웨이를 통해 데이터를 AWS의 다양한 서비스로 백업하고 자동화된 스냅샷 관리가 가능합니다.
사용 사례
백업 및 복구:

온프레미스 데이터를 클라우드로 백업하여 안전하게 보호하고, 필요 시 빠르게 복원할 수 있습니다.
데이터 아카이빙:

중요한 데이터를 장기간 보관할 때, 저비용의 S3 Glacier 같은 클라우드 스토리지로 아카이빙할 수 있습니다.
재해 복구:

온프레미스 시스템에 장애가 발생할 경우, 클라우드에서 데이터를 빠르게 복원하고 복구할 수 있는 재해 복구 솔루션을 제공합니다.
하이브리드 클라우드 애플리케이션:

온프레미스와 클라우드를 함께 사용하는 하이브리드 애플리케이션에서 Storage Gateway를 사용하여 데이터를 통합적으로 관리할 수 있습니다.
장점
비용 절감: 온프레미스 스토리지를 확장하지 않고도 AWS 클라우드 스토리지를 사용할 수 있어, 스토리지 비용을 절감할 수 있습니다.
유연성: 다양한 게이트웨이 유형을 제공하여 애플리케이션의 요구에 맞는 하이브리드 클라우드 스토리지 환경을 구축할 수 있습니다.
안전성: AWS의 보안 및 암호화 기능을 통해 데이터를 안전하게 보호합니다.
확장성: 필요에 따라 스토리지 용량을 무한히 확장할 수 있어, 예측 불가능한 데이터 증가에 유연하게 대응할 수 있습니다.
AWS Storage Gateway는 로컬에서 클라우드로 데이터를 쉽고 안전하게 통합하고 관리할 수 있는 훌륭한 솔루션입니다. 다양한 온프레미스 스토리지 요구 사항에 맞춰 게이트웨이를 선택하여, 데이터를 백업하고 아카이빙하거나 하이브리드 클라우드 환경을 쉽게 구축할 수 있습니다.


## 요약
- AWS Storage Gateway는 온프레미스 환경과 AWS 클라우드 간의 원활한 데이터 통합을 제공하는 하이브리드 클라우드 스토리지 서비스

## 개요
- 온프레미스 애플리케이션이 AWS 클라우드 스토리지를 원활하게 사용할 수 있도록 지원
- 다양한 스토리지 인터페이스를 제공하여 데이터 백업, 아카이빙, 재해 복구 등을 지원

## 주요 기능 및 특징
- 파일 게이트웨이(File Gateway): 파일 기반 애플리케이션이 Amazon S3를 네트워크 파일 시스템으로 사용할 수 있도록 지원
- 볼륨 게이트웨이(Volume Gateway): 블록 스토리지 볼륨을 Amazon S3에 백업하고, Amazon EBS 스냅샷으로 복원 가능
- 테이프 게이트웨이: 기존 백업 애플리케이션이 가상 테이프 라이브러리를 사용하여 데이터를 Amazon S3 및 Amazon Glacier에 저장할 수 있도록 지원
- 하이브리드 클라우드 스토리지: 온프레미스와 클라우드 간의 원활한 데이터 이동 및 관리 가능
- 데이터 암호화: 전송 중 및 저장 중인 데이터에 대해 암호화 제공
- 캐싱: 자주 액세스하는 데이터를 로컬에 캐싱하여 성능 향상

## 구성
- 파일 게이트웨이: NFS 및 SMB 프로토콜을 통해 Amazon S3와 통합
- 볼륨 게이트웨이: iSCSI 프로토콜을 통해 Amazon S3와 통합
- 테이프 게이트웨이: iSCSI 프로토콜을 통해 가상 테이프 라이브러리를 Amazon S3 및 Amazon Glacier와 통합
- 게이트웨이 어플라이언스: 온프레미스에 설치되는 가상 머신 또는 하드웨어 어플라이언스

## 작동 방식
1. AWS Management Console에서 Storage Gateway를 생성함
2. 게이트웨이 어플라이언스를 온프레미스 환경에 배포함
3. 파일, 볼륨, 테이프 게이트웨이 중 하나를 선택하여 설정함
4. 온프레미스 애플리케이션이 게이트웨이를 통해 AWS 클라우드 스토리지에 접근함
5. 데이터가 AWS 클라우드 스토리지로 전송되고, 필요에 따라 로컬에 캐싱됨

## 다른 서비스와의 연관성
- Amazon S3와 통합되어 파일 및 백업 데이터를 저장
- Amazon EBS와 통합되어 볼륨 스냅샷을 생성 및 복원
- Amazon Glacier와 통합되어 장기 아카이빙 데이터 저장
- AWS Identity and Access Management(IAM)와 연동하여 접근 제어 강화

## 사용 사례
- 온프레미스 데이터의 클라우드 백업 및 아카이빙
- 재해 복구를 위한 데이터 복제 및 복원
- 하이브리드 클라우드 환경에서의 데이터 통합 및 관리

## 결론
- AWS Storage Gateway는 온프레미스 환경과 AWS 클라우드 간의 원활한 데이터 통합을 제공하는 하이브리드 클라우드 스토리지 서비스
- 파일, 볼륨, 테이프 게이트웨이 등 다양한 스토리지 인터페이스를 제공하여 데이터 백업, 아카이빙, 재해 복구 등을 지원
- 데이터 암호화, 캐싱 등의 기능을 통해 보안 및 성능을 강화할 수 있음

## 예제 코드
```python
import boto3

# Storage Gateway 클라이언트 생성
storagegateway = boto3.client('storagegateway')

# 게이트웨이 생성
response = storagegateway.create_gateway(
    GatewayName='MyGateway',
    GatewayType='FILE_S3',
    ActivationKey='activation-key',
    GatewayRegion='us-west-2'
)

gateway_arn = response['GatewayARN']
print(f'Gateway ARN: {gateway_arn}')

# 파일 공유 생성
response = storagegateway.create_nfs_file_share(
    ClientToken='client-token',
    GatewayARN=gateway_arn,
    Role='arn:aws:iam::123456789012:role/MyRole',
    LocationARN='arn:aws:s3:::my-bucket',
    DefaultStorageClass='S3_STANDARD'
)

file_share_arn = response['FileShareARN']
print(f'File Share ARN: {file_share_arn}')