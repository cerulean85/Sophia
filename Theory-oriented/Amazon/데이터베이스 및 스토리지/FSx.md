# Amazon FSx

Amazon FSx는 AWS에서 제공하는 **완전 관리형 파일 시스템 서비스**입니다. Amazon FSx는 고성능 파일 스토리지를 제공하며, 사용자의 요구에 맞는 다양한 파일 시스템을 선택할 수 있도록 여러 파일 시스템 옵션을 지원합니다. FSx는 AWS에서 완전히 관리되는 상태로 제공되며, 데이터 보호, 고가용성, 성능 최적화 등 파일 스토리지의 복잡한 부분을 AWS가 대신 관리해줍니다.

### 주요 특징
- **완전 관리형**: 인프라 설정, 유지 관리, 백업 및 복원 등 모든 파일 시스템 관리 작업을 AWS에서 처리합니다.
- **고성능**: 고성능 입출력(I/O) 성능을 제공하여 파일 기반 애플리케이션의 성능 요구 사항을 충족합니다.
- **다양한 파일 시스템 지원**: Windows 파일 시스템, Lustre, NetApp ONTAP 등 다양한 파일 시스템을 지원하여, 각기 다른 애플리케이션의 요구 사항에 맞게 선택할 수 있습니다.
- **안정성 및 가용성**: 여러 가용 영역(AZ)에 걸쳐 데이터를 복제하여 고가용성을 제공합니다.
- **백업 및 복구**: 자동 백업 및 데이터 복구 기능을 제공하여 데이터의 안정성을 높입니다.
- **쉽고 유연한 확장성**: 용량 및 성능을 자동으로 확장하여, 사용자가 필요할 때 언제든지 확장할 수 있습니다.

### 지원되는 파일 시스템 종류
Amazon FSx는 주로 4가지 파일 시스템 옵션을 제공합니다:

#### 1. **Amazon FSx for Windows File Server**
- **목적**: Windows 기반 애플리케이션에서 사용되는 파일 스토리지를 위한 파일 시스템.
- **특징**: SMB 프로토콜 지원, 액티브 디렉토리(AD) 통합, NTFS 권한 관리.
- **사용 사례**: Windows 서버 애플리케이션, 홈 디렉토리, 공유 폴더, Microsoft SQL Server 등.

#### 2. **Amazon FSx for Lustre**
- **목적**: 고성능 컴퓨팅(HPC), 기계 학습, 빅데이터 분석 등 대규모 데이터 처리 작업을 위한 파일 시스템.
- **특징**: 고성능 병렬 파일 시스템으로, 빠른 읽기/쓰기 작업에 최적화.
- **사용 사례**: 기계 학습, 분석, 금융 모델링, 미디어 렌더링 등.

#### 3. **Amazon FSx for NetApp ONTAP**
- **목적**: 엔터프라이즈급 파일 시스템으로, NetApp ONTAP의 모든 기능을 제공.
- **특징**: 멀티 프로토콜(NFS, SMB) 지원, 데이터 압축, 스냅샷, 복제 등 NetApp ONTAP의 고급 기능 제공.
- **사용 사례**: 클라우드 및 온프레미스 환경에서의 데이터 관리, 멀티 프로토콜 애플리케이션 지원.

#### 4. **Amazon FSx for OpenZFS**
- **목적**: ZFS 파일 시스템을 사용하는 고성능 파일 스토리지 제공.
- **특징**: 스냅샷, 데이터 압축, 복제 기능 제공.
- **사용 사례**: 고성능 데이터베이스, 개발 환경, 빅데이터 분석 등.

### **사용 사례**
1. **Windows 애플리케이션**: Windows 환경에서 동작하는 애플리케이션에서 파일 시스템을 사용하여 애플리케이션 데이터를 저장 및 관리.
2. **고성능 컴퓨팅(HPC)**: Lustre 파일 시스템을 통해 복잡한 시뮬레이션, 기계 학습, 분석 작업에서 필요한 데이터 처리 속도 향상.
3. **하이브리드 클라우드 스토리지**: NetApp ONTAP을 사용하여 온프레미스 데이터 센터와 AWS 간 데이터 관리 통합.

### 요금
FSx의 요금은 사용한 스토리지 용량, 처리 성능, 네트워크 트래픽, 백업 옵션에 따라 다릅니다. FSx는 스토리지 유형에 따라 다르게 과금되며, 사용자는 필요한 성능과 용량에 맞게 선택할 수 있습니다.

Amazon FSx는 사용자가 기존의 파일 시스템을 AWS로 쉽게 이전할 수 있도록 하며, 기존 워크로드를 클라우드에서 원활하게 실행할 수 있게 지원하는 중요한 서비스입니다.



AWS에서 제공하는 두 가지 주요 파일 시스템 옵션인 **Amazon FSx**와 **Amazon EFS (Elastic File System)**는 각각의 용도와 특징에 따라 선택됩니다. FSx와 EFS 모두 AWS에서 관리형 파일 시스템을 제공하지만, 차이점은 사용 사례와 성능 요구 사항에 따라 결정됩니다. **FSx**는 특정 파일 시스템의 고유한 기능을 제공하는 데 집중하는 반면, **EFS**는 범용적으로 사용하기 편리한 네트워크 파일 시스템입니다.

아래에서 왜 특정 상황에서 FSx를 선택할 수 있는지 설명하겠습니다.

### 1. **지원하는 파일 시스템의 차이**
- **Amazon FSx**: 여러 종류의 파일 시스템을 지원합니다. 예를 들어, FSx for Windows File Server는 Windows 환경에 최적화된 SMB 프로토콜과 NTFS 권한을 지원합니다. 또한 FSx for Lustre는 고성능 병렬 파일 시스템으로, 데이터 처리 속도에 민감한 애플리케이션에 적합합니다. FSx for NetApp ONTAP은 멀티 프로토콜 지원(NFS, SMB)과 같은 고급 데이터 관리 기능을 제공합니다.
  - **주요 사용 사례**: Windows 서버 애플리케이션, 고성능 컴퓨팅(HPC), 빅데이터 분석, 머신 러닝, 미디어 렌더링 등.
  
- **Amazon EFS**: EFS는 **NFS(Network File System)** 프로토콜을 지원하는 범용 네트워크 파일 시스템으로, **리눅스 기반 애플리케이션**에 주로 사용됩니다. 여러 인스턴스에서 동시 접근이 가능하며, 사용자가 별도로 관리할 필요 없이 자동으로 크기를 조정합니다.
  - **주요 사용 사례**: 웹 서버, 컨테이너화된 애플리케이션, 개발 환경 등.

### 2. **성능 요구 사항**
- **Amazon FSx**는 고성능이 필요한 워크로드에 특화되어 있습니다.
  - **FSx for Lustre**는 대규모 데이터 처리 및 분석에 필요한 **고성능 병렬 처리**를 지원합니다. 이는 머신 러닝이나 대규모 시뮬레이션과 같은 고성능 컴퓨팅(HPC) 작업에 이상적입니다.
  - **FSx for Windows File Server**는 **Windows 환경**에 특화된 SMB 프로토콜과 고급 기능을 제공하며, AD 통합 및 NTFS 권한 관리가 필요할 때 선택됩니다.
  
- **Amazon EFS**는 **높은 확장성**과 안정성을 제공하지만, 성능이 FSx for Lustre처럼 고성능 처리를 요구하는 작업에는 적합하지 않습니다. 대신, 자동으로 용량이 늘어나고 줄어드는 유연성을 가지고 있어 일반적인 파일 저장소로 매우 적합합니다.
  - **성능 모드**: EFS는 범용성과 비용 절감을 위한 **스탠다드 성능 모드**와 고성능을 제공하는 **성능 모드**가 있지만, FSx처럼 전문적인 고성능 파일 시스템 기능을 제공하지는 않습니다.

### 3. **프로토콜 및 애플리케이션 호환성**
- **Amazon FSx**는 **Windows 환경** 또는 **특수한 파일 시스템 요구**(예: NetApp ONTAP, Lustre)와 같은 특정 워크로드에 최적화되어 있습니다. 특히 Windows 서버 환경에서 많이 사용하는 SMB(서버 메시지 블록) 프로토콜을 지원하는 **FSx for Windows File Server**는 EFS로는 해결할 수 없는 권한 관리 및 호환성 문제를 해결합니다.
  
- **Amazon EFS**는 리눅스 기반 애플리케이션에서 주로 사용되는 **NFS 프로토콜**을 지원합니다. 따라서 리눅스 기반의 다중 인스턴스에서 파일을 공유하는 경우 매우 적합합니다.

### 4. **데이터 관리 및 고급 기능**
- **Amazon FSx for NetApp ONTAP**과 같은 고급 파일 시스템은 **스냅샷**, **복제**, **데이터 압축**과 같은 데이터 관리 기능을 제공합니다. 이러한 기능들은 엔터프라이즈 환경에서 데이터의 고급 관리와 복원 기능이 필요할 때 유용합니다.
  
- **Amazon EFS**는 단순하고 자동 확장 가능한 네트워크 파일 시스템을 제공하지만, FSx에서 제공하는 고급 데이터 관리 기능은 없습니다.

### 5. **가격 및 확장성**
- **Amazon FSx**는 특정 고성능 워크로드를 위한 기능이 많기 때문에, 일부 파일 시스템(예: FSx for Lustre)에서는 비용이 상대적으로 높을 수 있습니다. 또한 각 파일 시스템의 특성에 따라 **최적화된 비용 모델**이 존재합니다.
  
- **Amazon EFS**는 일반적으로 더 많은 수의 리눅스 기반 애플리케이션에서 널리 사용되며, 용량을 자동으로 조정해주므로 **단순하고 비용 효율적인** 파일 저장소로 사용됩니다. 특히 소규모 또는 중간 규모의 애플리케이션에는 경제적입니다.

### **FSx가 더 적합한 경우**
- **Windows 서버 애플리케이션**: Windows 네이티브 환경에서 파일 시스템이 필요한 경우.
- **고성능 데이터 처리**: Lustre와 같은 병렬 파일 시스템을 활용하여 머신 러닝, HPC, 빅데이터 분석에 활용할 때.
- **특정 엔터프라이즈 요구 사항**: NetApp ONTAP의 고급 기능을 사용하는 경우.

### **EFS가 더 적합한 경우**
- 리눅스 기반의 범용 애플리케이션에서 다수의 EC2 인스턴스가 파일을 공유해야 할 때.
- 자동으로 확장되고 관리가 쉬운 파일 시스템이 필요할 때.

**결론적으로** FSx는 특정 성능이나 기능 요구 사항을 충족해야 할 때 사용하는 고급 파일 시스템 옵션이며, EFS는 범용적이고 단순한 네트워크 파일 시스템이 필요한 경우에 더 적합합니다.


# Amazon FSx

## 요약
- Amazon FSx는 AWS에서 제공하는 완전 관리형 파일 시스템 서비스

## 개요
- 다양한 파일 시스템 지원: Windows 파일 서버, Lustre, NetApp ONTAP, OpenZFS
- 고성능 파일 시스템을 손쉽게 배포 및 관리 가능

## 주요 기능 및 특징
- **다양한 파일 시스템 지원**
- **고성능**: 높은 처리량과 낮은 지연 시간
- **완전 관리형**: 백업, 복원, 패치, 모니터링 자동화
- **보안**: 데이터 암호화, VPC 통합, IAM 역할 기반 접근 제어
- **확장성**: 용량과 성능 확장 가능

## 구성
- **파일 시스템**: 선택한 파일 시스템 유형에 따라 구성
- **스토리지 용량**: 파일 시스템의 용량 설정
- **네트워크 설정**: VPC 및 서브넷 설정
- **보안 설정**: IAM 역할, 보안 그룹, 데이터 암호화 설정

## 작동 방식
1. 파일 시스템 유형 선택
2. 스토리지 용량, 네트워크, 보안 설정 구성
3. 파일 시스템 생성
4. 파일 시스템을 애플리케이션에 마운트하여 사용
5. 백업, 복원, 모니터링 등 관리 작업 수행

### 예제 코드
```python
import boto3

# FSx 클라이언트 생성
fsx = boto3.client('fsx')

# 파일 시스템 생성
response = fsx.create_file_system(
    FileSystemType='WINDOWS',
    StorageCapacity=300,
    SubnetIds=['subnet-12345678'],
    SecurityGroupIds=['sg-12345678'],
    WindowsConfiguration={
        'ThroughputCapacity': 32,
        'WeeklyMaintenanceStartTime': '1:05:00'
    }
)

print(response)
```

# 다른 서비스와의 연관성
- Amazon EC2: FSx 파일 시스템을 EC2 인스턴스에 마운트하여 사용
- AWS Backup: FSx 파일 시스템의 백업 및 복원 관리
- Amazon VPC: FSx 파일 시스템을 VPC 내에서 안전하게 사용

# 사용 사례
- 엔터프라이즈 파일 공유: Windows 파일 서버를 사용한 파일 공유
- 고성능 컴퓨팅(HPC): Lustre 파일 시스템을 사용한 HPC 워크로드
- 데이터베이스 백업: NetApp ONTAP을 사용한 데이터베이스 백업 및 복원
- 개발 및 테스트 환경: OpenZFS를 사용한 개발 및 테스트 환경 구성

# 결론
- Amazon FSx는 다양한 파일 시스템을 지원하는 완전 관리형 파일 시스템 서비스
- 고성능과 확장성을 제공
- AWS의 다른 서비스와 통합하여 다양한 사용 사례에 적용 가능


---

- 고성능 파일 시스템을 제공하는 AWS의 관리형 서비스
- 다양한 워크로드에 맞게 최적화된 파일 시스템을 제공하며, 사용자는 파일 시스템을 쉽게 생성, 관리, 확장할 수 있음
- Amazon FSx for Windows File Server와 Amazon FSx for Lustre 등 두 가지 주요 파일 시스템을 지원

주요 기능 및 특징:

다양한 파일 시스템 지원:

Amazon FSx for Windows File Server: Windows 기반 애플리케이션을 위한 완전 관리형 네이티브 Windows 파일 시스템.
Amazon FSx for Lustre: 고성능 컴퓨팅(HPC) 워크로드를 위한 고성능 병렬 파일 시스템.
Amazon FSx for NetApp ONTAP: NetApp의 데이터 관리 기능을 제공하는 파일 시스템.
Amazon FSx for OpenZFS: ZFS 파일 시스템의 기능을 제공하는 파일 시스템.
고성능: 높은 처리량과 낮은 지연 시간을 제공하여 데이터 집약적인 애플리케이션에 적합합니다.

완전 관리형: 하드웨어 프로비저닝, 패치 적용, 백업, 복구 등 파일 시스템 관리 작업을 자동화합니다.

보안: 데이터 암호화, VPC 통합, IAM을 통한 접근 제어를 지원합니다.

확장성: 필요에 따라 파일 시스템의 크기와 성능을 확장할 수 있습니다.

비용 효율성: 사용한 만큼만 비용을 지불하는 유연한 가격 모델을 제공합니다.

# 주요 기능
- Amazon FSx for Windows File Server
    - Windows 네티이브: Windws Server에서 제공하는 네이티브 파일 시스템 기능을 지원
    - 활성 디렉터리 통합: AWS Managed Microsoft AD 또는 온프레미스 AD와 통합할 수 있음
    - 고성능: 높은 처리량과 낮은 지연 시간을 제공
    - 데이터 보호: 자동 백업, 복제, 암호화 기능을 제공

- Amazon FSx for Lustre
    - 고성능 컴퓨팅: HPC, 머신 러닝, 미디어 처리와 같은 고성능 컴퓨팅 워크로드에 최적화
    - S3 통합: Amazon S3와 통합되어 데이터 세트를 쉽게 로드하고 저장할 수 있음
    - 저지연: 매우 낮은 지연 시간과 높은 처리량 제공
    - 확장성: 페타바이트 규모로 확장할 수 있음

# 사용 사례
    - 파일 공유: 팀 간 파일 공유 및 협업을 위한 네트워크 파일 시스템으로 사용
    - 백업 및 복구: 중요한 데이터를 안전하게 백업하고 복구할 수 있음
    - 고성능 컴퓨팅: HPC, 머신 러닝, 미디어 처리와 같은 고성능 컴퓨팅 워크로드를 지원
    - 데이터 분석: 대규모 데이터 세트를 분석하고 처리하는 데 사용

# Amazon FSx

- 클라우드 내 다기능 고성능 파일 시스템을 쉽고 비용 효과적으로 시작, 실행 및 확장 할 수 있음

- 안정성과 보안성, 확장성 및 폭넓ㄹ은 기능 세트로 광범위한 워크로드를 지원

- 최신 AWS 컴퓨팅, 네트워킹 및 디스크 기술을 기반으로 구축되어 높은 성능과 낮은 TCO 제공

> TCO란?
> 총소유비용(TCO, Total COst of Ownership)은 특정 자산의 구입 가격과 더불어 자산의 존속 기간에 걸친 운영비용을 포함으로, 자산의 매입 가격과 운용 원가를 합한 금액

- NetApp ONTAP, OpenZFS, Windows File Server, Lustre 중에 선택 가능


## FSx File Gateway
- 기존 워크로드가 계속해서 클라우드로 마이그레이션됨에 따라, 일부 고객은 일반적으로 온프레미스 파일 서버에 보관하는 데이터를 호스팅하기 위해 클라우드 네이티브 서비스를 사용할 수 없었습니다. 예를 들어, 팀 및 프로젝트 파일 공유 또는 콘텐츠 관리 시스템에 일반적으로 사용되는 데이터는 고객의 물리적 위치와 클라우드 사이에서 나타나는 긴 지연 시간, 제한된 대역폭 또는 공유 대역폭 문제로 인해 온프레미스에 상주해야 합니다.

오늘 AWS Storage Gateway의 새로운 유형인 Amazon FSx File Gateway를 출시합니다. 이 솔루션은 온프레미스 파일 서버를 계속해서 사용 및 관리하는 대신, Amazon FSx for Windows File Server에서 클라우드에 저장된 데이터에 액세스할 수 있도록 지원합니다. Amazon FSx File Gateway는 네트워크 최적화 및 캐싱을 사용하여, 여전히 온프레미스에 공유 데이터가 있는 것처럼 사용자 및 애플리케이션을 지원합니다. 파일 서버 데이터를 Amazon FSx for Windows File Server로 이전 및 통합하여 클라우드 스토리지의 규모와 경제성을 활용하고, Amazon FSx File Gateway로 지연 시간 및 대역폭에 관한 문제를 해결하는 동시에, 온프레미스 파일 서버 관리와 관련된 획일적인 유지 관리 부담에서 벗어날 수 있습니다.

## 특징
- 모든 기능 포함 및 완전관리형
- 하이브리드 활성화
- 높은 가용성 및 보호
- 비용 효과성

## References
- [Amazon FSx](https://aws.amazon.com/ko/fsx/)
-[Amazon FSx File Gateway – 클라우드에서 파일 서버 데이터에 대한 캐시 기반 빠른 액세스 지원](https://aws.amazon.com/ko/blogs/korea/get-started-using-amazon-fsx-file-gateway-for-fast-cached-access-to-file-server-data-in-the-cloud/)